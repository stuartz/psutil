<?php
@ob_start(); require_once 'includes/c04l340f.php'; require_once INC . '/f08034r.php'; if (isset($_POST['dtype']) && $_POST['dtype'] == 'json') { if (isset($_SESSION['tl'])) { $sp8ccae7 = $_SESSION['tl']; if ($sp8ccae7 < 0) { exit("Trial period expired"); } } header('Content-Type: application/json'); } else { if (isset($_POST['dtype']) && $_POST['dtype'] == 'table') { require_once INC . '/h08034r.php'; } } if (isset($_POST['selSupplier']) && $_POST['selSupplier'] != "") { $sp1102cf = isset($_POST['querytype']) ? $_POST['querytype'] : 4; $sp9ab6da = isset($_POST['dtype']) ? $_POST['dtype'] : 'normal'; $sp9182f2 = $_POST['referencenumber']; $spd1745b = $_POST['statusTimeStamp']; $sp9d1485 = $_POST['selSupplier']; order_status_call($sp1102cf, $sp9ab6da, $sp9182f2, $spd1745b, $sp9d1485); } function order_status_call($sp1102cf, $sp9ab6da, $sp9182f2, $spd1745b, $sp9d1485) { global $spe4320c; $spd87fd1 = s_sv($sp9d1485, $sp9182f2, $spd1745b, $sp1102cf, 1); if (!$spd87fd1['statusUrl']) { return false; } $sp6bc022 = get_order($spd87fd1, $sp9ab6da); $sp5e2af9 = $sp6bc022; if (is_string($sp6bc022)) { if ($sp9ab6da != 'json') { echo $sp6bc022; } } else { if (isset($sp6bc022[0]['SupplierError']) && $sp6bc022[0]['SupplierError']) { if ($sp9ab6da != 'json') { echo $sp6bc022[0]['SupplierError']; } } else { if ($sp9ab6da != 'json') { ?>
			<div class="gridline">
				<table id="gvOrdersloop" class="display" data-page-length="25" data-order="[[ 0, &quot;asc&quot; ]]" width="100%">
					<thead><tr>
						<th scope="col">PO# | Factory#</th>
						<th scope="col">Status ID</th><th scope="col">Status Name</th><th scope="col">Expected Ship Date</th><th scope="col">Expected Delivery Date</th><th scope="col">Email Address</th><th scope="col">Phone Number</th><th scope="col">Valid Timestamp</th><th>Shipping Status </th>
					</tr>
					</thead>
					<tbody>
<?php  } $sp898c72 = 0; foreach ($sp6bc022 as $sp8010b4) { $spab98e9 = ''; $sp5bc775 = get_detailArray('OrderStatusDetailArray', 'OrderStatusDetail', $sp8010b4); $sp703e5a = isset($sp8010b4['purchaseOrderNumber']) ? $sp8010b4['purchaseOrderNumber'] : ''; $sp843667 = ""; $sp65724c = ''; $sp90ac65 = ''; $spb668ca = ''; $spbab594 = ''; $sp89ae1b = ''; $sp89ae1b = ''; $sp799786 = ''; $spf2b8cf = ''; $sp2d06ce = ''; foreach ($sp5bc775 as $sp483c23) { $sped988d = isset($sp483c23['factoryOrderNumber']) ? $sp483c23['factoryOrderNumber'] : ''; $sp843667 = isset($sp483c23['statusName']) ? $sp483c23['statusName'] : ''; $sp65724c = isset($sp483c23['statusID']) ? $sp483c23['statusID'] : ''; $sp719d52 = isset($sp483c23['expectedShipDate']) ? $sp483c23['expectedShipDate'] : ''; $sp90ac65 = isset($sp483c23['expectedDeliveryDate']) ? $sp483c23['expectedDeliveryDate'] : ''; $spb668ca = isset($sp483c23['additionalExplanation']) ? $sp483c23['additionalExplanation'] : ''; $spbab594 = isset($sp483c23['responseRequired']) ? $sp483c23['responseRequired'] : ''; $sp89ae1b = isset($sp483c23['validTimestamp']) ? $sp483c23['validTimestamp'] : ''; $sp89ae1b = isset($sp483c23['validTimestamp']) ? $sp483c23['validTimestamp'] : ''; $sp843667 = str_replace(chr(194) . chr(160), ' ', $sp843667); $sp843667 = str_replace('Ã¢', ' ', $sp843667); $sp843667 = str_replace(chr(194) . chr(128) . chr(194) . chr(153), ' ', $sp843667); if ($sp1102cf == '4' && ($sp65724c == '80' || $sp65724c == '99')) { $sp65724c = ""; } if ($sp65724c != "") { $spab98e9 .= '<tr>'; $spab98e9 .= '<td class="shippinginfo" id="' . $sp703e5a . '">' . $sp703e5a . ' | ' . $sped988d . '</td>'; if ($sp719d52 != "") { $sp719d52 = date("Y-m-d H:i:s", strtotime($sp719d52)); } if ($sp90ac65 != "") { $sp90ac65 = date("Y-m-d H:i:s", strtotime($sp90ac65)); } if ($sp89ae1b != "") { $sp89ae1b = date("Y-m-d H:i:s", strtotime($sp89ae1b)); } $spab98e9 .= '<td>' . $sp65724c . '</td>'; $spab98e9 .= '<td>' . $sp843667 . '</td>'; $spab98e9 .= '<td>' . $sp719d52 . '</td>'; $spab98e9 .= '<td>' . $sp90ac65 . '</td>'; $sp476a9e = get_detailArray('ResponseToArray', 'RespondTo', $sp483c23); $sp799786 = ''; $spf2b8cf = ''; $sp2d06ce = ''; $sp7d2bb3 = ''; $sp109e6e = ''; $spe008ed = 0; $sp1f948f = 0; foreach ($sp476a9e as $spaa7748) { $sp799786 = isset($spaa7748['name']) ? $spaa7748['name'] : ''; $spf2b8cf = isset($spaa7748['emailAddress']) ? $spaa7748['emailAddress'] : ''; $sp2d06ce = isset($spaa7748['phoneNumber']) ? $spaa7748['phoneNumber'] : ''; if ($spf2b8cf != "") { if ($spe008ed > 0) { $spf2b8cf .= ", "; } $sp7d2bb3 .= $spf2b8cf; $spe008ed++; } if ($sp2d06ce != "") { if ($sp1f948f > 0) { $sp2d06ce .= ", "; } $sp109e6e .= $sp2d06ce; $sp1f948f++; } } $spab98e9 .= '<td>' . $sp7d2bb3 . '</td>'; $spab98e9 .= '<td>' . $sp109e6e . '</td>'; if ($sped988d) { $sp88e329 = $sped988d; $spa5ee69 = 2; $spb6915c = $sp88e329; } else { $sp88e329 = false; $spa5ee69 = 1; $spb6915c = $sp703e5a; } if ($sp9ab6da != 'json') { if ($spd87fd1['shippingUrl']) { $spc7fe19 = searcharraySh($sp703e5a, $sp65724c, $spd87fd1['paramSh'], $spd87fd1['shippingUrl'], $spa5ee69, $spd87fd1['shippingEndPt'], $sp9ab6da, $sp88e329); } } $spab98e9 .= '<td>' . $sp89ae1b . '</td>'; $spab98e9 .= '<td>' . $spc7fe19 . '</td>'; $spab98e9 .= '</tr>'; } } if ($sp9ab6da != 'json') { echo $spab98e9; } set_time_limit(0); if ($sp9ab6da == 'json') { if ($spd87fd1['shippingUrl']) { $sp5e2af9[$sp898c72]['trkng'] = searcharraySh($sp703e5a, $sp65724c, $spd87fd1['paramSh'], $spd87fd1['shippingUrl'], $sp5a8ab0, $spd87fd1['shippingEndPt'], $sp9ab6da); } } $sp898c72++; } } } if ($spe4320c) { return $sp5e2af9; } else { if ($sp9ab6da == 'json') { echo json_encode($sp5e2af9); } else { ?>

					</tbody></table>
				</div>
			</div>
		</body>
	</html>
<?php  } } } function searcharraySh($spb6c8d5, $spf90bee, $sp7a0e91, $sp1d25f3, $sp5a8ab0, $sp844ed5, $sp9ab6da = false, $sp88e329 = false) { global $spe4320c; $sp421137 = ""; $sp920563 = ""; $spebde54 = ""; if ($spf90bee == "80" || $spf90bee == "75") { $sp41597c = ''; if ($sp1d25f3 == "") { return; } $sp7a0e91['referenceNumber'] = $spb6c8d5; $sp7a0e91['queryType'] = 1; $sp5de03a = csC($sp1d25f3, "getOrderShipmentNotification", array($sp7a0e91)); if (isset($sp5de03a['SoapCallError'])) { $sp5de03a = csC2(APP . '/wsdl/OrderShipmentNotificationService.wsdl', $sp1d25f3, "getOrderShipmentNotification", array($sp7a0e91)); } if (isset($sp5de03a['SoapCallError']) || !isset($sp5de03a['OrderShipmentNotificationArray']['OrderShipmentNotification'])) { $sp5de03a = csC2($sp1d25f3, $sp844ed5, "getOrderShipmentNotification", array($sp7a0e91)); } if (!$sp5de03a && $sp88e329) { $sp7a0e91['referenceNumber'] = $sp88e329; $sp7a0e91['queryType'] = 2; $sp5de03a = csC($sp1d25f3, "getOrderShipmentNotification", array($sp7a0e91)); if (isset($sp5de03a['SoapCallError'])) { $sp5de03a = csC2(APP . '/wsdl/OrderShipmentNotificationService.wsdl', $sp1d25f3, "getOrderShipmentNotification", array($sp7a0e91)); } if (isset($sp5de03a['SoapCallError']) || !isset($sp5de03a['OrderShipmentNotificationArray']['OrderShipmentNotification'])) { $sp5de03a = csC2($sp1d25f3, $sp844ed5, "getOrderShipmentNotification", array($sp7a0e91)); } } if (isset($sp815e5d['errorMessage'])) { $spfa5264 = "Vendor error message: " . $sp815e5d['errorMessage']; if ($sp9ab6da == 'json' && !$spe4320c) { echo json_encode(array('SupplierError' => $spfa5264)); die; } else { return array(array('SupplierError' => $spfa5264)); } } else { if (isset($sp815e5d['SoapCallError'])) { if ($sp9ab6da == 'json' && !$spe4320c) { echo json_encode($sp815e5d); die; } else { if ($spe4320c) { return "SoapFault " . $sp815e5d['SoapCallError']; } } return "Fail to load 2"; die; } } $sp85f153 = get_detailArray('OrderShipmentNotificationArray', 'OrderShipmentNotification', $sp5de03a); $spf2ce4c = array(); foreach ($sp85f153 as $spfb8c11) { if ($spb6c8d5 == trim($spfb8c11['purchaseOrderNumber'])) { $sp444a43 = get_detailArray('SalesOrderArray', 'SalesOrder', $spfb8c11); foreach ($sp444a43 as $spe1c82b) { $sp55c326 = get_detailArray('ShipmentLocationArray', 'ShipmentLocation', $spe1c82b); if (is_array($sp55c326)) { foreach ($sp55c326 as $sp0939b3) { $sp4bc769 = get_detailArray('PackageArray', 'Package', $sp0939b3); $sp898c72 = 0; foreach ($sp4bc769 as $spf29343) { $spf4a940 = isset($spf29343['trackingNumber']) ? $spf29343['trackingNumber'] : ''; if ($sp9ab6da == 'json') { if ($spe4320c) { $sp820be6 = isset($spf29343['shipmentDate']) ? $spf29343['shipmentDate'] : ''; $spf2ce4c[] = array(c4t($spf4a940), $sp820be6, $spe1c82b['salesOrderNumber']); } else { $spebde54 .= c4t($spf4a940) . ','; } $sp898c72++; continue; } $sp9d9643 = isset($spf29343['carrier']) ? $spf29343['carrier'] : ''; $sp855b3b = isset($spf29343['shipmentMethod']) ? $spf29343['shipmentMethod'] : ''; $sp364a7f = trackingno($sp9d9643, $spf4a940, $sp855b3b); $spebde54 .= $sp364a7f; $sp898c72++; } } } } } } } if ($sp9ab6da == 'json') { return $spf2ce4c; } if ($spebde54 == "" && ($spf90bee == "80" || $spf90bee == "75")) { $spebde54 = "Shipped"; } elseif ($spf90bee == "99") { $spebde54 = "Canceled"; } elseif ($spebde54 == "" && ($spf90bee == "10" || $spf90bee == "11" || $spf90bee == "20" || $spf90bee == "30" || $spf90bee == "40" || $spf90bee == "41" || $spf90bee == "42" || $spf90bee == "43" || $spf90bee == "44" || $spf90bee == "60" || $spf90bee == "70")) { $spebde54 = "In Process"; } return $spebde54; set_time_limit(0); }