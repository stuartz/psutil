<?php
function c4t($sp9cca5d) { if (strpbrk($sp9cca5d, '1234567890') !== FALSE) { return $sp9cca5d; } else { return ''; } } function check_strong_password($spa3ea45) { $sp62c2ec = array(); $spa1c408 = strlen($spa3ea45); if (strtoupper(substr($spa3ea45, 0, 8)) == 'PASSWORD') { $sp62c2ec[sizeof($sp62c2ec)] = "is 'password' . . . are you really using 'password' for your password? If so, this is not allowed."; } if ($spa1c408 <= 7) { $sp62c2ec[sizeof($sp62c2ec)] = "is too short"; } if (!preg_match("#[@%^*-+=\\{}<>~?!]+#", $spa3ea45)) { $sp62c2ec[sizeof($sp62c2ec)] = " must include at least one special"; } if (!preg_match("#[0-9]+#", $spa3ea45)) { $sp62c2ec[sizeof($sp62c2ec)] = " must include at least one number"; } if (!preg_match("#[a-z]+#", $spa3ea45)) { $sp62c2ec[sizeof($sp62c2ec)] = " must include at least one lowercase letter"; } if (!preg_match("#[A-Z]+#", $spa3ea45)) { $sp62c2ec[sizeof($sp62c2ec)] = " must include at least one uppercase letter"; } $sp0d8b2b = ""; $spef42b8 = sizeof($sp62c2ec); for ($spa4f211 = 0; $spa4f211 < $spef42b8; $spa4f211++) { if ($spa4f211 == 0) { $sp0d8b2b .= "Your password "; } if ($spa4f211 == $spef42b8 - 1 && $spef42b8 != 1) { $sp0d8b2b .= " and "; } if ($spa4f211 != 0 && $spa4f211 != $spef42b8 - 1) { $sp0d8b2b .= ", "; } $sp0d8b2b .= $sp62c2ec[$spa4f211]; } return $sp0d8b2b; } function get_detailArray($sp8dff41, $spe89ed9, $sp32ba45) { $sp1f8082 = array(); if (isset($sp32ba45[$sp8dff41][$spe89ed9])) { if (isset($sp32ba45[$sp8dff41][$spe89ed9][0])) { foreach ($sp32ba45[$sp8dff41][$spe89ed9] as $spfacf88) { if ($sp8dff41 == 'OrderStatusArray' && isset($spfacf88['OrderStatusDetailArray']['OrderStatusDetail'][0])) { foreach ($spfacf88['OrderStatusDetailArray']['OrderStatusDetail'] as $sp168b76 => $sp6b47c3) { $sp229345 = $sp6b47c3; } $spfacf88['OrderStatusDetailArray']['OrderStatusDetail'] = array($sp229345); } $sp1f8082[] = $spfacf88; } } else { if ($sp8dff41 == 'OrderStatusArray' && isset($sp32ba45[$sp8dff41][$spe89ed9]['OrderStatusDetailArray']['OrderStatusDetail'][0])) { foreach ($sp32ba45[$sp8dff41][$spe89ed9]['OrderStatusDetailArray']['OrderStatusDetail'] as $sp168b76 => $sp6b47c3) { $sp229345 = $sp6b47c3; } $sp32ba45[$sp8dff41][$spe89ed9]['OrderStatusDetailArray']['OrderStatusDetail'] = array($sp229345); } $sp1f8082[] = $sp32ba45[$sp8dff41][$spe89ed9]; } } else { if (isset($sp32ba45[$sp8dff41][0])) { foreach ($sp32ba45[$sp8dff41] as $spfacf88) { if ($sp8dff41 == 'OrderStatusArray' && isset($spfacf88['OrderStatusDetailArray']['OrderStatusDetail'][0])) { foreach ($spfacf88['OrderStatusDetailArray']['OrderStatusDetail'] as $sp168b76 => $sp6b47c3) { $sp229345 = $sp6b47c3; } $spfacf88['OrderStatusDetailArray']['OrderStatusDetail'] = array($sp229345); } $sp1f8082[] = $spfacf88; } } else { if ($sp8dff41 == 'OrderStatusArray' && isset($sp32ba45[$sp8dff41]['OrderStatusDetailArray']['OrderStatusDetail'][0])) { foreach ($sp32ba45[$sp8dff41]['OrderStatusDetailArray']['OrderStatusDetail'] as $sp168b76 => $sp6b47c3) { $sp229345 = $sp6b47c3; } $sp32ba45[$sp8dff41]['OrderStatusDetailArray']['OrderStatusDetail'] = array($sp229345); } $sp1f8082[] = $sp32ba45[$sp8dff41]; } } return $sp1f8082; } function getHost() { $spcbf980 = array('HTTP_X_FORWARDED_HOST', 'HTTP_HOST', 'SERVER_NAME', 'SERVER_ADDR'); $sp7b192c = array("HTTP_X_FORWARDED_HOST" => function ($sp93d81f) { $sp3a5cf6 = explode(',', $sp93d81f); return trim(end($sp3a5cf6)); }); $sp24a649 = ''; foreach ($spcbf980 as $sp139b4b) { if (!empty($sp24a649)) { break; } if (empty($_SERVER[$sp139b4b])) { continue; } $sp24a649 = $_SERVER[$sp139b4b]; if (array_key_exists($sp139b4b, $sp7b192c)) { $sp24a649 = $sp7b192c[$sp139b4b]($sp24a649); } } $sp24a649 = preg_replace('/:\\d+$/', '', $sp24a649); return trim($sp24a649); } function get_order($spd87fd1, $sp9ab6da) { global $spe4320c; $sp7eeda3 = ""; $sp4b82a8 = $spd87fd1['statusUrl']; $spd9544a = APP . '/wsdl/OrderStatusService.wsdl'; $spc6954a = $spd87fd1['statusEndPt']; $sp815e5d = csC($sp4b82a8, "getorderstatusDetails", array($spd87fd1['param'])); if (isset($sp815e5d['SoapCallError'])) { $sp815e5d = csC2(APP . '/wsdl/OrderStatusService.wsdl', $spd87fd1['statusUrl'], "getorderstatusDetails", array($spd87fd1['param'])); } if (isset($sp815e5d['SoapCallError']) || !isset($sp815e5d['OrderStatusArray']['OrderStatus'])) { $sp815e5d = csC2($spd87fd1['statusUrl'], $spd87fd1['statusEndPt'], "getorderstatusDetails", array($spd87fd1['param'])); } if (isset($sp815e5d['errorMessage']) && $sp815e5d['errorMessage'] != 'No Errors') { $spfa5264 = "Vendor error message: " . $sp815e5d['errorMessage']; if ($sp9ab6da == 'json' && !$spe4320c) { echo json_encode(array('SupplierError' => $spfa5264)); die; } else { return array(array('SupplierError' => $spfa5264)); } } else { if (isset($sp815e5d['SoapCallError'])) { $sp7eeda3 = "Failed to load 1: " . $sp815e5d['SoapCallError']; if ($sp9ab6da == 'json' && !$spe4320c) { echo json_encode($sp815e5d); die; } else { if ($spe4320c) { return array(array('SoapCallError' => $sp7eeda3)); } } echo $sp7eeda3; die; } else { if (!isset($sp815e5d['OrderStatusArray']['OrderStatus'])) { if ($sp9ab6da == 'json' && !$spe4320c) { echo json_encode(array('SupplierError' => 'Empty Promo Service response')); die; } else { return array(array('SupplierError' => 'Empty Promo Service response')); } echo " No details found."; die; } } } return get_detailArray('OrderStatusArray', 'OrderStatus', $sp815e5d); } function get_order_status_details($spfacf88) { global $sp5d261f; if ($spfacf88['validTimestamp']) { $sp5d261f['EPY55ERDJ'] = jde_date($spfacf88['validTimestamp']); $sp5d261f['EPY55ERTM'] = jde_time($spfacf88['validTimestamp']); } else { $sp5d261f['EPY55ERDJ'] = jde_date(date('Y/m/d H:m:s')); $sp5d261f['EPY55ERTM'] = jde_time(date('Y/m/d H:m:s')); } if (strlen($sp5d261f['EPY55ACK'] . $spfacf88['factoryOrderNumber'] . ' ') < 60) { $sp5d261f['EPY55ACK'] .= $spfacf88['factoryOrderNumber'] . ' '; } if ($spfacf88['expectedShipDate']) { $sp921b73 = jde_date($spfacf88['expectedShipDate']); if ($sp5d261f['EPPDDJ'] < $sp921b73) { $sp5d261f['EPPDDJ'] = $sp921b73; } } if ($spfacf88['expectedDeliveryDate']) { $sp921b73 = jde_date($spfacf88['expectedDeliveryDate']); if ($sp5d261f['EPY55EDVD'] < $sp921b73) { $sp5d261f['EPY55EDVD'] = $sp921b73; } } if ($spfacf88['statusID']) { if (!$sp5d261f['EPY55ESTS'] || $sp5d261f['EPY55ESTS'] > $spfacf88['statusID']) { $sp5d261f['EPY55ESTS'] = $spfacf88['statusID']; } } if (strlen($sp5d261f['EPY55ECMT'] . $spfacf88['factoryOrderNumber'] . " : " . $spfacf88['statusName'] . " | ") < 1024) { $sp5d261f['EPY55ECMT'] .= $spfacf88['factoryOrderNumber'] . " : " . $spfacf88['statusName'] . " | "; } if ($sp5d261f['EPY55ESNR'] != "Y") { $sp5d261f['EPY55ESNR'] = $spfacf88['responseRequired'] ? "Y" : "N"; } if (isset($spfacf88['ResponseToArray'])) { foreach ($spfacf88['ResponseToArray'] as $spe034f5) { $sp799786 = ''; $spf2b8cf = ''; $sp2d06ce = ''; $sp7d2bb3 = ''; $sp109e6e = ''; if (is_array($spe034f5)) { $spe008ed = 0; $sp1f948f = 0; $sp799786 = isset($spe034f5['name']) ? $spe034f5['name'] : ''; $spf2b8cf = isset($spe034f5['emailAddress']) ? $spe034f5['emailAddress'] : ''; $sp2d06ce = isset($spe034f5['phoneNumber']) ? $spe034f5['phoneNumber'] : ''; if ($spf2b8cf != "") { if ($spe008ed > 0) { $spf2b8cf .= ", "; } $sp7d2bb3 .= $spf2b8cf; $spe008ed++; } if ($sp2d06ce != "") { if ($sp1f948f > 0) { $sp2d06ce .= ", "; } $sp109e6e .= $sp2d06ce; $sp1f948f++; } $spfffdd7 = $sp799786 . ' ' . $sp7d2bb3 . " " . $sp109e6e; } else { if (is_string($spe034f5)) { $spfffdd7 = $spe034f5; } } if (strpos($sp5d261f['EPY55ECNT'], $spfffdd7) === FALSE) { $sp5d261f['EPY55ECNT'] .= $spfffdd7; } } } } function isTg($sp8e5f39, $spf6c0f8, $sp234f52, $sp69d421, $spb627db = "PROMorder", $sp390c6a = "OrderUpd8") { $sp30c40d = Vtgn($sp8e5f39[0]); $sp886af2 = "SELECT PHKCOO,PHRORN,PHRCTO FROM F4301\n\t\t\tWHERE PHMCU = {$spf6c0f8['EPMCU']} AND PHDCTO = '{$spf6c0f8['EPDCTO']}' AND PHDOCO = {$spf6c0f8['EPDOCO']}"; $spb7a591 = dQ($sp886af2)[0]; if (!$spb7a591) { echo "no F4301 record"; return; } if (!dQ("SELECT FUY55FUTK FROM F55520\n\t\t\t\t\tWHERE FURORN='{$spb7a591['PHRORN']}'\n\t\t\t\t\tAND FUY55FUTK='{$sp8e5f39[0]}'")) { if (strpos($sp8e5f39[1], '00:00:00Z') !== FALSE) { $sp8e5f39[1] = str_replace('00:00:00Z', '08:00:00Z', $sp8e5f39[1]); } $sp66d040 = $sp8e5f39[1] ? jde_date($sp8e5f39[1]) : ''; dQ("INSERT INTO F55520 (FUKCOO,FUMCU,FUDOCO,FUDCTO,FURORN,FURCTO,FUY55FUTK,FUURDT,\n\t\t\t\t\tFUUSER,FUPID,FUJOBN,FUUPMJ,FUUPMT,FUY55FUASN,FUURAT,FUURRF)\n\t\t\t\tVALUES ('{$spf6c0f8['EPKCOO']}','{$spf6c0f8['EPMCU']}',{$spf6c0f8['EPDOCO']},'{$spf6c0f8['EPDCTO']}',\n\t\t\t\t\t'{$spb7a591['PHRORN']}','{$spb7a591['PHRCTO']}','{$sp8e5f39[0]}',{$sp66d040},\n\t\t\t\t\t'{$sp69d421}','{$spb627db}','{$sp390c6a}',{$sp234f52[0]},{$sp234f52[1]},'N',0,'')"); $sp5d261f = false; $sp898c72 = 0; do { $spe32ff7 = dQ("SELECT MAX(FUY55SEQ) AS SEQN FROM F55510\n\t\t\t\t\t\t\tWHERE FUMCU like '%1' AND FUDOCO={$spf6c0f8['EPDOCO']} AND FUDCTO='{$spf6c0f8['EPDCTO']}'"); $spf91bf7 = $spe32ff7[0]['SEQN'] + 1000; $sp886af2 = "INSERT INTO F55510 (FUKCOO,FUMCU,FUDOCO,FUDCTO,FURORN,FURCTO,FUY55SEQ,FUY55FUAC,FUY55ACK,\n\t\t\t\t\t\tFUUSER,FUPID,FUJOBN,FUUPMJ,FUUPMT,FUURAT,FUURRF,FUY55FAENT)\n\t\t\t\t\tVALUES ('{$spf6c0f8['EPKCOO']}','{$spf6c0f8['EPMCU']}',{$spf6c0f8['EPDOCO']},'{$spf6c0f8['EPDCTO']}',\n\t\t\t\t\t\t'{$spb7a591['PHRORN']}','{$spb7a591['PHRCTO']}',{$spf91bf7},'TRC','{$spb627db} {$sp30c40d} Factory#{$sp8e5f39[2]}',\n\t\t\t\t\t\t'{$sp69d421}','{$spb627db}','{$sp390c6a}',{$sp234f52[0]},{$sp234f52[1]},0,'','N')"; $sp5d261f = dQ($sp886af2); $sp898c72++; } while (!$sp5d261f && $sp898c72 < 5); if (!insert) { s_mL(SMTP_FROM, "Order Update Error", "Attempt to update F55510 failed: <br>sql={$sp886af2}", '', '', '', true); } if ($sp66d040) { $sp5d261f = false; $sp898c72 = 0; $spf91bf7 = $spf91bf7 + 1000; $sp886af2 = "INSERT INTO F55510 (FUKCOO,FUMCU,FUDOCO,FUDCTO,FUY55SEQ,FURORN,FURCTO,FUY55FUAC,FUY55ACK,\n\t\t\t\t\tFUUSER,FUPID,FUJOBN,FUUPMJ,FUUPMT)\n\t\t\t\tVALUES\n\t\t\t\t\t('{$spf6c0f8['EPKCOO']}','{$spf6c0f8['EPMCU']}',{$spf6c0f8['EPDOCO']},'{$spf6c0f8['EPDCTO']}',\n\t\t\t\t\t{$spf91bf7},'{$spb7a591['PHRORN']}','{$spb7a591['PHRCTO']}','SIS','{$spb627db} {$sp30c40d} Factory#{$sp8e5f39[2]}',\n\t\t\t\t\t'{$sp69d421}','{$spb627db}','{$sp390c6a}',{$sp234f52[0]},{$sp234f52[1]})"; $sp5d261f = dQ($sp886af2); while (!$sp5d261f && $sp898c72 < 5) { $sp898c72++; $spe32ff7 = dQ("SELECT MAX(FUY55SEQ) AS SEQN FROM F55510\n\t\t\t\t\t\t\t\tWHERE FUMCU like '%1' AND FUDOCO={$spf6c0f8['EPDOCO']} AND FUDCTO='{$spf6c0f8['EPDCTO']}'"); $spf91bf7 = $spe32ff7[0]['SEQN'] + 1000; $sp886af2 = "INSERT INTO F55510 (FUKCOO,FUMCU,FUDOCO,FUDCTO,FUY55SEQ,FURORN,FURCTO,FUY55FUAC,FUY55ACK,\n\t\t\t\t\t\tFUUSER,FUPID,FUJOBN,FUUPMJ,FUUPMT)\n\t\t\t\t\tVALUES\n\t\t\t\t\t\t('{$spf6c0f8['EPKCOO']}','{$spf6c0f8['EPMCU']}',{$spf6c0f8['EPDOCO']},'{$spf6c0f8['EPDCTO']}',\n\t\t\t\t\t\t{$spf91bf7},'{$spb7a591['PHRORN']}','{$spb7a591['PHRCTO']}','SIS','{$spb627db} {$sp30c40d} Factory#{$sp8e5f39[2]}',\n\t\t\t\t\t\t'{$sp69d421}','{$spb627db}','{$sp390c6a}',{$sp234f52[0]},{$sp234f52[1]})"; $sp5d261f = dQ($sp886af2); } if (!insert) { s_mL(SMTP_FROM, "Order Update Error", "Attempt to update F55510 failed: <br>sql={$sp886af2}", '', '', '', true); } } } else { echo "\n<B>{$sp8e5f39[0]} exists</B>\n"; } } function jde_date($sp536b1d) { date_default_timezone_set('America/Chicago'); $sp921b73 = strtotime($sp536b1d); $sp2f1ab2 = substr(strftime('%C', $sp921b73), 0, 1) - 1; return $sp2f1ab2 . strftime('%y%j', $sp921b73); } function jde_now() { date_default_timezone_set('America/Chicago'); $sp921b73 = time(); $sp2f1ab2 = substr(strftime('%C', $sp921b73), 0, 1) - 1; return array($sp2f1ab2 . strftime('%y%j', $sp921b73), date('His', $sp921b73)); } function jde_time($sp536b1d) { return str_replace(':', '', substr($sp536b1d, 11, 8)); } function print_array($sp15f233) { echo '<pre>'; print_r($sp15f233); echo '</pre>'; } function csC($spf0c143, $spe1a90d, $spbed444) { require_once 'includes/s4noop090.php'; ini_set("soap.wsdl_cache_enabled", "0"); $sp7d3aa0 = array('trace' => 1); if (substr($spf0c143, 0, 5) == 'https') { $sp6c056b = stream_context_create(['ssl' => ['ciphers' => 'ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:SRP-DSS-AES-256-CBC-SHA:SRP-RSA-AES-256-CBC-SHA:SRP-AES-256-CBC-SHA:DH-DSS-AES256-GCM-SHA384:DHE-DSS-AES256-GCM-SHA384:DH-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA256:DH-RSA-AES256-SHA256:DH-DSS-AES256-SHA256:DHE-RSA-AES256-SHA:DHE-DSS-AES256-SHA:DH-RSA-AES256-SHA:DH-DSS-AES256-SHA:DHE-RSA-CAMELLIA256-SHA:DHE-DSS-CAMELLIA256-SHA:DH-RSA-CAMELLIA256-SHA:DH-DSS-CAMELLIA256-SHA:ECDH-RSA-AES256-GCM-SHA384:ECDH-ECDSA-AES256-GCM-SHA384:ECDH-RSA-AES256-SHA384:ECDH-ECDSA-AES256-SHA384:ECDH-RSA-AES256-SHA:ECDH-ECDSA-AES256-SHA:AES256-GCM-SHA384:AES256-SHA256:AES256-SHA:CAMELLIA256-SHA:PSK-AES256-CBC-SHA:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:SRP-DSS-AES-128-CBC-SHA:SRP-RSA-AES-128-CBC-SHA:SRP-AES-128-CBC-SHA:DH-DSS-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:DH-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-SHA256:DHE-DSS-AES128-SHA256:DH-RSA-AES128-SHA256:DH-DSS-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA:DH-RSA-AES128-SHA:DH-DSS-AES128-SHA:DHE-RSA-SEED-SHA:DHE-DSS-SEED-SHA:DH-RSA-SEED-SHA:DH-DSS-SEED-SHA:DHE-RSA-CAMELLIA128-SHA:DHE-DSS-CAMELLIA128-SHA:DH-RSA-CAMELLIA128-SHA:DH-DSS-CAMELLIA128-SHA:ECDH-RSA-AES128-GCM-SHA256:ECDH-ECDSA-AES128-GCM-SHA256:ECDH-RSA-AES128-SHA256:ECDH-ECDSA-AES128-SHA256:ECDH-RSA-AES128-SHA:ECDH-ECDSA-AES128-SHA:AES128-GCM-SHA256:AES128-SHA256:AES128-SHA:SEED-SHA:CAMELLIA128-SHA:PSK-AES128-CBC-SHA:ECDHE-RSA-RC4-SHA:ECDHE-ECDSA-RC4-SHA:ECDH-RSA-RC4-SHA:ECDH-ECDSA-RC4-SHA:RC4-SHA:RC4-MD5:PSK-RC4-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:SRP-DSS-3DES-EDE-CBC-SHA:SRP-RSA-3DES-EDE-CBC-SHA:SRP-3DES-EDE-CBC-SHA:EDH-RSA-DES-CBC3-SHA:EDH-DSS-DES-CBC3-SHA:DH-RSA-DES-CBC3-SHA:DH-DSS-DES-CBC3-SHA:ECDH-RSA-DES-CBC3-SHA:ECDH-ECDSA-DES-CBC3-SHA:DES-CBC3-SHA:PSK-3DES-EDE-CBC-SHA']]); $sp7d3aa0['ssl_method'] = "SOAP_SSL_METHOD_TLS"; $sp7d3aa0['stream_context'] = $sp6c056b; } try { $spdbb813 = new SoapClient($spf0c143, $sp7d3aa0); $spd68044 = $spdbb813->__soapCall($spe1a90d, $spbed444); } catch (SoapFault $spe008ed) {$sp7eeda3=$spe008ed->faultcode."--".$spe008ed->faultstring; if(!PRODUCTION){echo "While using WSDL returned from $spf0c143<br>SoapCall error: $sp7eeda3";} return array('SoapCallError' => $sp7eeda3); } return json_decode(json_encode($spd68044), true); } function csC2($sp4b82a8, $spf0c143, $spe1a90d, $spbed444) { $sp7d3aa0 = array('trace' => 1); if (substr($spf0c143, 0, 5) == 'https') { $sp6c056b = stream_context_create(['ssl' => ['ciphers' => 'ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:SRP-DSS-AES-256-CBC-SHA:SRP-RSA-AES-256-CBC-SHA:SRP-AES-256-CBC-SHA:DH-DSS-AES256-GCM-SHA384:DHE-DSS-AES256-GCM-SHA384:DH-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA256:DH-RSA-AES256-SHA256:DH-DSS-AES256-SHA256:DHE-RSA-AES256-SHA:DHE-DSS-AES256-SHA:DH-RSA-AES256-SHA:DH-DSS-AES256-SHA:DHE-RSA-CAMELLIA256-SHA:DHE-DSS-CAMELLIA256-SHA:DH-RSA-CAMELLIA256-SHA:DH-DSS-CAMELLIA256-SHA:ECDH-RSA-AES256-GCM-SHA384:ECDH-ECDSA-AES256-GCM-SHA384:ECDH-RSA-AES256-SHA384:ECDH-ECDSA-AES256-SHA384:ECDH-RSA-AES256-SHA:ECDH-ECDSA-AES256-SHA:AES256-GCM-SHA384:AES256-SHA256:AES256-SHA:CAMELLIA256-SHA:PSK-AES256-CBC-SHA:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:SRP-DSS-AES-128-CBC-SHA:SRP-RSA-AES-128-CBC-SHA:SRP-AES-128-CBC-SHA:DH-DSS-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:DH-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES128-SHA256:DHE-DSS-AES128-SHA256:DH-RSA-AES128-SHA256:DH-DSS-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA:DH-RSA-AES128-SHA:DH-DSS-AES128-SHA:DHE-RSA-SEED-SHA:DHE-DSS-SEED-SHA:DH-RSA-SEED-SHA:DH-DSS-SEED-SHA:DHE-RSA-CAMELLIA128-SHA:DHE-DSS-CAMELLIA128-SHA:DH-RSA-CAMELLIA128-SHA:DH-DSS-CAMELLIA128-SHA:ECDH-RSA-AES128-GCM-SHA256:ECDH-ECDSA-AES128-GCM-SHA256:ECDH-RSA-AES128-SHA256:ECDH-ECDSA-AES128-SHA256:ECDH-RSA-AES128-SHA:ECDH-ECDSA-AES128-SHA:AES128-GCM-SHA256:AES128-SHA256:AES128-SHA:SEED-SHA:CAMELLIA128-SHA:PSK-AES128-CBC-SHA:ECDHE-RSA-RC4-SHA:ECDHE-ECDSA-RC4-SHA:ECDH-RSA-RC4-SHA:ECDH-ECDSA-RC4-SHA:RC4-SHA:RC4-MD5:PSK-RC4-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:SRP-DSS-3DES-EDE-CBC-SHA:SRP-RSA-3DES-EDE-CBC-SHA:SRP-3DES-EDE-CBC-SHA:EDH-RSA-DES-CBC3-SHA:EDH-DSS-DES-CBC3-SHA:DH-RSA-DES-CBC3-SHA:DH-DSS-DES-CBC3-SHA:ECDH-RSA-DES-CBC3-SHA:ECDH-ECDSA-DES-CBC3-SHA:DES-CBC3-SHA:PSK-3DES-EDE-CBC-SHA']]); $sp7d3aa0['ssl_method'] = "SOAP_SSL_METHOD_TLS"; $sp7d3aa0['stream_context'] = $sp6c056b; }if(!PRODUCTION){echo "<br>Attempting to use WSDL from $sp4b82a8 and setting location to $spf0c143<br>";} try { $spdbb813 = new SoapClient($sp4b82a8, $sp7d3aa0); $spdbb813->__setLocation($spf0c143); $spd68044 = $spdbb813->__soapCall($spe1a90d, $spbed444); } catch (SoapFault $spe008ed) {$sp7eeda3=$spe008ed->faultcode."--".$spe008ed->faultstring;if(!PRODUCTION){echo "SoapFault2: $sp7eeda3";} return array('SoapCallError' => $sp7eeda3); } return json_decode(json_encode($spd68044), true); } function s_mL($sp1be437, $spdd8ef7, $sp56547e, $spb3579f = '', $sp61ff03 = '', $sp093de4 = false, $sp2abdd3 = false, $sp77fdab = 0) { if (empty($sp1be437) && empty($spb3579f)) { return 'Error: no recipients'; } $spd31aa1 = date('m-d H:i:s'); if ($sp77fdab < 2) { $sp3356d3 = new PHPMailer(true); $sp3356d3->CharSet = 'utf-8'; $sp3356d3->SMTPDebug = 0; $sp3356d3->Debugoutput = 'error_log'; $sp3356d3->isSMTP(); $sp3356d3->Host = SMTP_HOST; $sp3356d3->SMTPAuth = true; $sp3356d3->SMTPSecure = "tls"; $sp3356d3->Username = SMTP_FROM; $sp3356d3->Password = SMTP_PASSWORD; $sp3356d3->Port = SMTP_PORT; try { $sp3356d3->setFrom(SMTP_FROM, 'PS Utilities'); if ($sp1be437) { $sp9d14af = explode(',', $sp1be437); foreach ($sp9d14af as $sp663cd6) { $sp799786 = ''; if (strpos($sp663cd6, '<')) { $sp5b3878 = explode('<', str_replace('>', '', $sp663cd6)); $sp663cd6 = $sp5b3878[1]; $sp799786 = $sp5b3878[0]; } $sp3356d3->addAddress($sp663cd6, $sp799786); } } if ($spb3579f) { $sp9d14af = explode(',', $spb3579f); foreach ($sp9d14af as $sp663cd6) { $sp799786 = ''; if (strpos($sp663cd6, '<')) { $sp5b3878 = explode('<', str_replace('>', '', $sp663cd6)); $sp663cd6 = $sp5b3878[1]; $sp799786 = $sp5b3878[0]; } $sp3356d3->addCC($sp663cd6, $sp799786); } } if ($sp61ff03) { $sp9d14af = explode(',', $sp61ff03); foreach ($sp9d14af as $sp663cd6) { $sp799786 = ''; if (strpos($sp663cd6, '<')) { $sp5b3878 = explode('<', str_replace('>', '', $sp663cd6)); $sp663cd6 = $sp5b3878[1]; $sp799786 = $sp5b3878[0]; } $sp3356d3->addBCC($sp663cd6, $sp799786); } } if ($sp093de4) { $sp799786 = ''; if (strpos($sp093de4, '<')) { $sp5b3878 = explode('<', str_replace('>', '', $sp093de4)); $sp093de4 = $sp5b3878[1]; $sp799786 = $sp5b3878[0]; } $sp3356d3->addReplyTo($sp093de4, $sp799786); } $sp3356d3->Subject = $spdd8ef7; if ($sp2abdd3) { $sp3356d3->IsHTML(true); $sp3356d3->MsgHTML($sp56547e); $sp3356d3->AltBody = $sp56547e; } else { $sp3356d3->IsHTML(false); $sp3356d3->Body = $sp56547e; } if (!$sp3356d3->Send()) { error_log("Not sent: <pre>'.print_r(error_get_last(), true).'</pre>"); $sp77fdab++; sleep(1); s_mL($sp1be437, $spdd8ef7, $sp56547e, $spb3579f, $sp61ff03, $sp093de4, $sp2abdd3, $sp77fdab); } else { return true; } } catch (Exception $spe008ed) { $spb443cb = $spe008ed->getMessage(); error_log("phpmailer error: {$spd31aa1} {$spb443cb}"); return; } } else { $spd77679 = "Mailer ERROR...tried 3 times: "; $spcc6d4e = "{$spd77679} Date: {$spd31aa1} | To: {$sp1be437} | CC: {$spb3579f} | BCC: {$sp61ff03}"; error_log("{$spd31aa1} {$spcc6d4e}"); return; } } function supplier_list() { global $sp563fcc; $sp886af2 = "select row_id,userName, password, statusUrl, companyID, companyName, statusVersion, shippingUrl, shippingVersion from Companies where userName != '' and  password != '' and statusUrl != '' order by companyName"; foreach ($sp563fcc->query($sp886af2)->fetchAll() as $sp8caba6) { $sp1c56e3 = $sp8caba6['row_id']; $sp3f9719 = $sp8caba6['userName']; $spa3ea45 = $sp8caba6['password']; $spd9bfd0 = $sp8caba6['statusUrl']; $sp75ad00 = $sp8caba6['companyID']; $spc1bf8a = $sp8caba6['companyName']; $sp8c7873 = $sp8caba6['statusVersion']; $sp1d25f3 = $sp8caba6['shippingUrl']; $sp90f107 = $sp8caba6['shippingVersion']; $sp01e84c[$sp1c56e3] = array('row_id' => $sp1c56e3, 'companyID' => $sp75ad00, 'companyName' => $spc1bf8a, 'statusUrl' => $spd9bfd0, 'statusVersion' => $sp8c7873, 'userName' => $sp3f9719, 'password' => $spa3ea45, 'shippingUrl' => $sp1d25f3, 'shippingVersion' => $sp90f107); } return $sp01e84c; } function s_sv($sp9d1485, $sp9182f2, $spd1745b, $sp1102cf, $spf18113) { global $sp563fcc; $spd87fd1 = array('row_id' => '', 'companyID' => '', 'companyName' => '', 'statusEndPt' => '', 'statusUrl' => '', 'statusVersion' => '', 'userName' => '', 'password' => '', 'shippingUrl' => '', 'shippingVersion' => '', 'shippingEndPt' => ''); $spf2272f = $sp563fcc->prepare("select row_id,userName, password, statusUrl, companyID, companyName, statusVersion, shippingUrl, shippingVersion,shippingEndPt, statusEndPt from Companies where userName IS NOT NULL and statusUrl != '' and statusVersion != '' and row_id=?"); $spf2272f->execute(array($sp9d1485)); $sp8caba6 = $spf2272f->fetch();$spd87fd1 = array('row_id' => $sp8caba6['row_id'], 'companyID' => $sp8caba6['companyID'], 'companyName' => $sp8caba6['companyName'], 'statusUrl' => $sp8caba6['statusUrl'], 'statusVersion' => $sp8caba6['statusVersion'], 'userName' => $sp8caba6['userName'], 'password' => $sp8caba6['password'], 'shippingUrl' => $sp8caba6['shippingUrl'], 'shippingVersion' => $sp8caba6['shippingVersion'], 'shippingEndPt' => $sp8caba6['shippingEndPt'],'statusEndPt' => $sp8caba6['statusEndPt']); $sp39a9ba = ""; if ($spd87fd1['userName'] == "") { $sp39a9ba .= "Username required for {$sp8caba6['companyName']}.<br />"; } if ($spd87fd1['statusUrl'] == "") { $sp39a9ba .= "statusUrl required for {$sp8caba6['companyName']}.<br />"; } if ($spd87fd1['statusVersion'] == "") { $sp39a9ba .= "statusVersion required for {$sp8caba6['companyName']}.<br />"; } if (!empty($sp39a9ba)) { echo $sp39a9ba; return; } $spd87fd1['param'] = array("wsVersion" => $spd87fd1['statusVersion'], "id" => $spd87fd1['userName'], "password" => $spd87fd1['password'], "queryType" => $sp1102cf); $spd87fd1['paramSh'] = array("wsVersion" => $spd87fd1['shippingVersion'], "id" => $spd87fd1['userName'], "password" => $spd87fd1['password'], "queryType" => $spf18113); if ($sp9182f2 != "") { $spd87fd1['param']['referenceNumber'] = $sp9182f2; $spd87fd1['paramSh']['referenceNumber'] = $sp9182f2; } if ($spd1745b != "") { $spd87fd1['param']['statusTimeStamp'] = $spd1745b; $spd87fd1['paramSh']['shipmentDateTimeStamp'] = $spd1745b; } return $spd87fd1; } function trackingno($sp421137, $sp9cca5d, $sp24976e) { require_once INC . '/tu434af6.php'; $sp2f6202 = $sp421137; $sp421137 = strtolower($sp421137); $sp93e176 = $sp24976e; $sp24976e = strtolower($sp24976e); $spbb2cf2 = " (Not Specified)"; $sp5e52cb = "Not Specified"; if ($sp421137 != "") { $spbb2cf2 = " (" . $sp2f6202 . ")"; } if ($sp421137 == 'ups (usa)' || $sp421137 == 'ups' || $sp421137 == 'ups (us)') { $sp920563 = UPS; } elseif ($sp421137 == "" && substr($sp24976e, 0, 3) === 'ups') { $sp920563 = UPS; $spbb2cf2 = " (" . $sp93e176 . ")"; } elseif ($sp421137 == 'fedex (usa)' || $sp421137 == 'fedex' || $sp421137 == 'fedex (us)') { $sp920563 = FEDEX; } elseif ($sp421137 == '' && substr($sp24976e, 0, 3) == 'fedex') { $sp920563 = FEDEX; $spbb2cf2 = " (" . $sp93e176 . ")"; } elseif ($sp421137 == 'us postal service') { $sp920563 = USPS; } elseif ($sp421137 == 'miscellaneous' || $sp421137 == 'miscellaneous (us)') { $sp920563 = ""; } else { $sp920563 = ""; } if ($sp920563 == "") { if ($sp2f6202 != "") { $sp5e52cb = $sp2f6202; } if (preg_match("/\\b(1Z ?[0-9A-Z]{3} ?[0-9A-Z]{3} ?[0-9A-Z]{2} ?[0-9A-Z]{4} ?[0-9A-Z]{3} ?[0-9A-Z]|[\\dT]\\d\\d\\d ?\\d\\d\\d\\d ?\\d\\d\\d)\\b/", $sp9cca5d)) { $sp920563 = UPS; $spbb2cf2 = " (" . $sp5e52cb . ")"; } elseif (preg_match("/(\\b96\\d{20}\\b)|(\\b\\d{15}\\b)|(\\b\\d{12}\\b)/", $sp9cca5d)) { $sp920563 = FEDEX; $spbb2cf2 = " (" . $sp5e52cb . ")"; } elseif (preg_match("/\\b((98\\d\\d\\d\\d\\d?\\d\\d\\d\\d|98\\d\\d) ?\\d\\d\\d\\d ?\\d\\d\\d\\d( ?\\d\\d\\d)?)\\b/", $sp9cca5d)) { $sp920563 = FEDEX; $spbb2cf2 = " (" . $sp5e52cb . ")"; } elseif (preg_match("/^[0-9]{15}\$ | ^[0-9]{12}\$/", $sp9cca5d)) { $sp920563 = FEDEX; $spbb2cf2 = " (" . $sp5e52cb . ")"; } elseif (preg_match("/^[0-9]{22}\$ | ^[0-9]{20} | ^[A-Z]{2} ?\\d\\d\\d ?\\d\\d\\d ?\\d\\d\\d ?US\$/", $sp9cca5d)) { $sp920563 = USPS; $spbb2cf2 = " (" . $sp5e52cb . ")"; } } if ($sp920563 != "") { $sp08932b = "<a href='" . $sp920563 . "" . $sp9cca5d . "' target='_blank'>" . $sp9cca5d . "</a>" . $spbb2cf2 . ", "; } else { $sp08932b = $sp9cca5d . "" . $spbb2cf2 . ", "; } if ($sp9cca5d == "") { $sp08932b = ""; } return $sp08932b; } function Vtgn($sp9cca5d) { if (preg_match("/\\b(1Z ?[0-9A-Z]{3} ?[0-9A-Z]{3} ?[0-9A-Z]{2} ?[0-9A-Z]{4} ?[0-9A-Z]{3} ?[0-9A-Z]|[\\dT]\\d\\d\\d ?\\d\\d\\d\\d ?\\d\\d\\d)\\b/", $sp9cca5d)) { return $sp9cca5d; } else { if (preg_match("/(\\b\\d{22}\\b)|(\\b\\d{20}\\b)|(\\b\\d{15}\\b)|(\\b\\d{12}\\b)/", $sp9cca5d)) { return $sp9cca5d; } else { if (preg_match("/\\b[A-Z]{2}\\d{9}[A-Z]{2}\\b/", $sp9cca5d)) { return $sp9cca5d; } else { return $sp9cca5d . " is invalid #,"; } } } }
